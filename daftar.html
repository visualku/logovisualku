<!DOCTYPE html>
<html lang="id">
<head>
    <title>Daftar - LogoVisualku</title>
</head>
<body>
    <form id="registerForm">
        <input type="text" id="name" placeholder="Nama" required>
        <input type="email" id="email" placeholder="Email" required>
        <input type="password" id="password" placeholder="Password" required>
        <select id="bank"><option>BCA</option><option>DANA</option></select>
        <input type="text" id="account" placeholder="No Rekening" required>
        <button type="submit">Daftar</button>
    </form>

    <script type="module">
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
      import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-auth.js";
      import { getFirestore, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

      const app = initializeApp(firebaseConfig);
      const auth = getAuth(app);
      const db = getFirestore(app);

      document.getElementById('registerForm').addEventListener('submit', async (e) => {
        e.preventDefault();
        const email = document.getElementById('email').value;
        const password = document.getElementById('password').value;
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        await addDoc(collection(db, 'users'), {
          uid: userCredential.user.uid,
          name: document.getElementById('name').value,
          email,
          bank: document.getElementById('bank').value,
          account: document.getElementById('account').value,
          role: 'designer'
        });
        alert("Daftar berhasil!");
        window.location.href = 'kontes.html';
      });
    </script>
</body>
</html>
